---
title: "L1 C.elegans plate experiment"
author: "Pedro de Bos"
date: '2022-04-19'
output: html_document
---


```{r setup, include=FALSE}
#Basic functions
library(tidyverse)
#Library to create dose-response curves
library(drc)
#Library to read excel documents
library(readxl)
#Library to use relative paths in coding instead of absolute paths
library(here)
#Library to create plots
library(ggplot2)
```

In this RMD, a excel data sheet supplied by J. louter (INT/ILC), derrived from a experiment in which adult C.elegans were exposed to varying concentrations of different compounds. In this RMD, a dose-response curve shall be created.

First off, the data stored in an excel file shall be read
````{r reading_excelData}
excel_location<-here("data.raw/CE.LIQ.FLOW.062_Tidydata.xlsx")
Celegans_data_raw<-read_excel(excel_location, sheet = 1)
````

After reading in the data, it's transformed in order to be able to create proper figures from it. For this, the important data columns.
expType: The type of experiment (Experimental, control)

RawData: Ammount of ofspring Celegans gave after 68 hours of exposure to the treatment

compName: The compound to which the Celegans was exposed to.

compConcentration: The concentration of the compound which the Celegans was exposed to.

````{r tidying_Excel}
#Dataset inspection and transformation

#Selecting data for this goal
Celegans_data_select<-Celegans_data_raw %>% dplyr::select(expType, compName, RawData, compConcentration)

#Datapoint 259 has a comma instead of a point. Transforming value via str_replace
Celegans_data_select$compConcentration<-Celegans_data_select$compConcentration %>% str_replace(",", ".")

#Now properly transforming the compConcentration data into numeric
Celegans_data_select$compConcentration<-Celegans_data_select$compConcentration %>% as.numeric()

#Transforming expType and compName into a factor variable

levels_exptype<-unique(Celegans_data_select$expType) #storing all exptype levels
Celegans_data_select$expType<-factor(Celegans_data_select$expType, levels = levels_exptype) #Transforming exptype
levels_compname<-unique(Celegans_data_select$compName) #Storing all compName levels
Celegans_data_select$compName<-factor(Celegans_data_select$compName, levels = levels_compname) #Transforming compName into factor

#Re-loading the
Celegans_data<-Celegans_data_select

#Checking if transformation went properly
Celegans_data
````

After tidying the data from the excel file, exploritary graphs have been created to study the data more thouroughly

````{r dataplots}
Celegans_data %>% ggplot(aes(x=log10(compConcentration), y=RawData))+
  geom_jitter()+
  geom_point(aes(colour = compName ,shape = expType))
  
````

